#N canvas 96 1 558 252 10;
#X declare -lib iem_tab;
#X declare -lib iemmatrix;
#X obj 436 -44 table one\$0;
#X obj 141 -86 inlet;
#X obj 140 98 switch~;
#N canvas 407 21 537 478 table-rec 0;
#X obj 182 338 arraycopy block\$0;
#X obj 181 130 f;
#X obj 181 231 spigot;
#X obj 181 173 t f f;
#X obj 214 211 <;
#X obj 160 366 f;
#X obj 186 366 + 1;
#X msg 169 69 0;
#X obj 152 -43 inlet;
#X obj 37 65 inlet;
#X obj 152 -19 unpack s s f f;
#X obj 370 136 / 512;
#X obj 207 130 + 512;
#X msg 309 84 set \$1;
#X obj 182 287 pack f s f;
#X msg 182 312 copy \$2 \$1 +\$3;
#X obj 37 158 outlet;
#X obj 152 43 t b b b s;
#X obj 230 188 - 1024;
#X obj 309 106 arraysize sound;
#X obj 37 99 spigot;
#N canvas 208 24 412 364 zeropad 0;
#X obj 156 48 log;
#X obj 141 81 /;
#X obj 156 6 loadbang;
#X floatatom 142 199 5 0 0 0 - - -;
#X obj 141 130 fmod 1;
#X obj 191 131 int;
#X obj 141 154 > 0;
#X obj 142 177 +;
#X obj 141 102 t f f;
#X msg 156 27 2;
#X msg 142 219 2 \$1;
#X obj 142 245 pow;
#X obj 126 47 log;
#X obj 126 -22 inlet;
#X obj 142 304 outlet;
#X msg 142 268 set \$1 1 1;
#X connect 0 0 1 1;
#X connect 1 0 8 0;
#X connect 2 0 9 0;
#X connect 3 0 10 0;
#X connect 4 0 6 0;
#X connect 5 0 7 1;
#X connect 6 0 7 0;
#X connect 7 0 3 0;
#X connect 8 0 4 0;
#X connect 8 1 5 0;
#X connect 9 0 0 0;
#X connect 10 0 11 0;
#X connect 11 0 15 0;
#X connect 12 0 1 0;
#X connect 13 0 12 0;
#X connect 15 0 14 0;
#X restore 311 6 pd zeropad;
#X obj 311 27 outlet;
#X obj 370 200 pack f s;
#X msg 370 223 \; \$2 resize \$1;
#X obj 206 8 s \$0window-size;
#X obj 234 50 s \$0hop-size;
#X obj 408 136 r \$0hop-size;
#X obj 235 108 r \$0hop-size;
#X obj 263 167 r \$0window-size;
#X obj 238 266 r \$0window-size;
#X obj 151 103 del 1;
#X obj 384 41 s \$0interp;
#X obj 383 0 b;
#X msg 384 21 1;
#X obj 370 170 *;
#X obj 397 170 r \$0mel-bands;
#X obj 35 397 s;
#X obj 35 346 list prepend;
#X obj 37 123 t b b b l;
#X obj 213 367 r \$0mel-bands;
#X connect 1 0 3 0;
#X connect 1 0 12 0;
#X connect 2 0 14 0;
#X connect 3 0 2 0;
#X connect 3 1 4 0;
#X connect 4 0 2 1;
#X connect 4 0 20 1;
#X connect 5 0 6 0;
#X connect 5 0 38 1;
#X connect 6 0 5 1;
#X connect 7 0 1 0;
#X connect 7 0 5 0;
#X connect 8 0 10 0;
#X connect 9 0 20 0;
#X connect 10 0 17 0;
#X connect 10 1 23 1;
#X connect 10 1 37 1;
#X connect 10 2 21 0;
#X connect 10 2 25 0;
#X connect 10 3 26 0;
#X connect 10 3 33 0;
#X connect 11 0 35 0;
#X connect 12 0 1 1;
#X connect 13 0 19 0;
#X connect 14 0 15 0;
#X connect 15 0 0 0;
#X connect 17 0 31 0;
#X connect 17 1 7 0;
#X connect 17 2 19 0;
#X connect 17 3 13 0;
#X connect 17 3 14 1;
#X connect 18 0 4 1;
#X connect 19 0 18 0;
#X connect 19 0 11 0;
#X connect 20 0 39 0;
#X connect 21 0 22 0;
#X connect 23 0 24 0;
#X connect 27 0 11 1;
#X connect 28 0 12 1;
#X connect 29 0 18 1;
#X connect 30 0 14 2;
#X connect 31 0 16 0;
#X connect 33 0 34 0;
#X connect 34 0 32 0;
#X connect 35 0 23 0;
#X connect 36 0 35 1;
#X connect 38 0 37 0;
#X connect 39 0 16 0;
#X connect 39 1 1 0;
#X connect 39 2 5 0;
#X connect 39 3 38 0;
#X connect 40 0 6 1;
#X restore 22 50 pd table-rec;
#X obj 236 44 b;
#X msg 236 68 0;
#X obj -7 -77 inlet~;
#X msg 355 58 resize \$1 \, const 0;
#X obj 354 -24 table block\$0;
#X obj 355 79 s block\$0;
#N canvas 140 14 247 360 analysis 0;
#X obj 12 -296 tabreceive~ block\$0;
#X obj 116 -176 block~;
#X msg 116 -201 set \$1 1 1;
#X obj 116 -232 r \$0window-size;
#X obj 9 -188 *~;
#X obj 34 -191 *~;
#X obj 15 -166 +~;
#X obj 16 -142 sqrt~;
#X obj 9 -224 rfft~;
#X obj 10 -276 inlet~;
#X obj 10 -251 *~;
#X obj 55 -275 tabreceive~ \$0-hann;
#X obj 17 -118 tabsend~ one\$0;
#N canvas 677 0 451 704 mel 0;
#X obj 214 690 outlet;
#X obj 85 115 for++ 0 40 0.01;
#X obj 86 -13 bang~;
#X obj 85 139 t f f;
#X obj 85 164 tabread \$0mel;
#X obj 176 169 tabread \$0mel;
#X obj 176 146 + 1;
#X obj 214 667 t l b;
#X obj 214 643 list split 24;
#X obj 128 91 - 1;
#X obj 84 311 /;
#X obj 134 402 pack;
#X msg 134 425 0 \$1 0 \$2;
#X obj 132 548 tab_sum wtri\$0;
#X obj 124 377 int;
#X obj 84 356 tabwrite wtri\$0;
#X obj 84 292 t f f;
#X obj 85 216 t b f f f;
#X obj 134 447 tab_mul wtri\$0 one\$0 wtri\$0;
#X msg 132 526 0 \$1;
#X obj 133 505 f;
#X obj 183 46 inlet;
#X obj 134 472 tab_mul wtri\$0 wtri\$0 wtri\$0;
#X obj 113 60 s one\$0;
#X obj 86 13 t b b;
#X msg 113 37 0 0;
#X obj 213 623 list prepend;
#X obj 213 586 expr log(if($f1==0 \, 1 \, max($f1 \, 0.01)));
#X obj 84 270 for++ 1 4;
#X obj 84 335 expr min($f1 \, (1-$f1))*2;
#X obj 85 197 expr (int($f2)-int($f1))+1 \;;
#X obj 96 244 + 1;
#X connect 1 0 3 0;
#X connect 2 0 24 0;
#X connect 3 0 4 0;
#X connect 3 1 6 0;
#X connect 4 0 14 1;
#X connect 4 0 30 0;
#X connect 5 0 30 1;
#X connect 6 0 5 0;
#X connect 7 0 0 0;
#X connect 7 1 26 1;
#X connect 8 0 7 0;
#X connect 8 2 26 1;
#X connect 9 0 1 1;
#X connect 10 0 29 0;
#X connect 11 0 12 0;
#X connect 12 0 18 0;
#X connect 13 1 27 0;
#X connect 14 0 11 0;
#X connect 16 0 10 0;
#X connect 16 1 15 1;
#X connect 17 0 28 0;
#X connect 17 1 31 0;
#X connect 17 2 28 1;
#X connect 17 3 11 1;
#X connect 17 3 20 1;
#X connect 18 0 22 0;
#X connect 19 0 13 0;
#X connect 20 0 19 0;
#X connect 21 0 9 0;
#X connect 21 0 8 1;
#X connect 22 0 20 0;
#X connect 24 0 1 0;
#X connect 24 1 25 0;
#X connect 25 0 23 0;
#X connect 26 0 8 0;
#X connect 27 0 26 0;
#X connect 28 0 16 0;
#X connect 28 1 14 0;
#X connect 29 0 15 0;
#X connect 30 0 17 0;
#X connect 31 0 10 1;
#X restore 57 -67 pd mel;
#N canvas 696 31 488 576 dct 0;
#X obj 76 11 mtx;
#X obj 76 -84 t b f f;
#X obj 77 34 mtx_mul 0;
#X obj 77 56 mtx_cos;
#X obj 38 187 mtx_mul;
#X obj 89 234 outlet;
#X obj 77 103 prepend;
#X obj 77 129 prepend col;
#X obj 38 211 niagara 3;
#N canvas 617 106 467 415 outras 0;
#X obj -124 -254 s \$0um;
#X obj -123 -272 prepend 0;
#X obj -127 -236 for++ 0 1023;
#X obj -132 -136 list-map;
#X obj -132 -115 sum;
#X obj -132 -93 tabwrite \$0dois;
#X obj -133 -185 tab_mul_scalar \$0um \$0tres;
#X obj -127 -214 t f f f;
#X obj -131 -156 tabdump \$0tres;
#X obj -79 -131 cos;
#X text -122 -315 possibilidade de fazer com tables apenas muito mais
pesado mas permite que se opere com vetores maiores que 1024 (matrizes
operam ate isse tamanho);
#X obj -167 41 mtx_mul;
#X obj -167 64 mtx_print;
#X obj -149 13 mtx 10 2;
#X obj -155 -10 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text -164 -65 como funciona a multiplicacao de matrizes;
#X msg 103 -73 1 2 3 4 5 6 7 8 9 10;
#X obj 103 -50 sum;
#X floatatom 117 -20 5 0 0 0 - - -;
#X obj -48 47 mtx_print;
#X msg -89 7 col 2 2 2 2 2 2 2 2 2 2 2;
#X msg -123 -17 col 1 10 0 0 0 0 0 0 0 0 0;
#X msg -168 -46 matrix 1 10 1 2 3 4 5 6 7 8 9 10;
#X connect 1 0 0 0;
#X connect 2 0 7 0;
#X connect 3 0 4 0;
#X connect 3 1 9 0;
#X connect 4 0 5 0;
#X connect 6 0 8 0;
#X connect 7 0 6 0;
#X connect 7 1 5 1;
#X connect 8 0 3 0;
#X connect 9 0 3 1;
#X connect 11 0 12 0;
#X connect 13 0 11 1;
#X connect 13 0 19 0;
#X connect 14 0 13 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 20 0 13 0;
#X connect 21 0 13 0;
#X connect 22 0 11 0;
#X restore 262 -279 pd outras possibilidades;
#X obj -65 75 inlet;
#X obj 88 -285 inlet;
#X obj -65 124 list prepend matrix 1;
#X obj -65 98 list prepend 40;
#X obj -65 147 list trim;
#X msg 154 -50 matrix \$1 1;
#X obj 91 -16 prepend;
#X obj 77 153 mtx 40 40;
#X msg 154 100 zeros \$1;
#X obj 88 -262 t b f f f f f f;
#X obj 154 128 mtx;
#X obj 89 -234 for++ 1 40;
#X obj 78 -106 for++ 1 40;
#X obj 90 -137 t l b;
#X obj 90 -161 list split 24;
#X obj 89 -181 list prepend;
#X obj 88 -209 expr ($f1-0.5)*(3.1415/$f2);
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 1 1 6 1;
#X connect 1 2 2 1;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 4 0 8 0;
#X connect 6 0 7 0;
#X connect 7 0 17 0;
#X connect 8 1 5 0;
#X connect 10 0 13 0;
#X connect 11 0 13 1;
#X connect 11 0 19 0;
#X connect 12 0 14 0;
#X connect 13 0 12 0;
#X connect 14 0 4 0;
#X connect 15 0 16 1;
#X connect 16 0 0 1;
#X connect 17 0 4 1;
#X connect 18 0 20 0;
#X connect 19 0 21 0;
#X connect 19 1 22 1;
#X connect 19 2 26 1;
#X connect 19 3 24 1;
#X connect 19 4 21 1;
#X connect 19 5 15 0;
#X connect 19 6 18 0;
#X connect 20 0 17 1;
#X connect 21 0 26 0;
#X connect 21 1 22 0;
#X connect 22 0 1 0;
#X connect 22 1 17 0;
#X connect 23 0 16 0;
#X connect 23 1 25 1;
#X connect 24 0 23 0;
#X connect 24 2 25 1;
#X connect 25 0 24 0;
#X connect 26 0 25 0;
#X restore 57 -38 pd dct;
#X obj 57 -8 outlet;
#X obj 57 -89 r \$0mel-bands;
#X connect 0 0 10 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 4 0 6 0;
#X connect 5 0 6 1;
#X connect 6 0 7 0;
#X connect 7 0 12 0;
#X connect 8 0 4 0;
#X connect 8 0 4 1;
#X connect 8 1 5 0;
#X connect 8 1 5 1;
#X connect 9 0 10 0;
#X connect 10 0 8 0;
#X connect 11 0 10 1;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 16 0 13 0;
#X connect 16 0 14 1;
#X restore 22 20 pd analysis;
#X obj -7 -33 *~;
#N canvas 0 0 450 300 rt 0;
#X obj 183 158 outlet;
#X msg 183 121 set \$1 \$2;
#X obj 164 42 inlet;
#X obj 164 70 t b l l;
#X obj 137 158 outlet;
#X msg 137 126 1;
#X obj 271 155 s \$0window-size;
#X obj 271 127 unpack;
#X obj 305 180 s \$0interp;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 3 1 1 0;
#X connect 3 2 7 0;
#X connect 5 0 4 0;
#X connect 7 0 6 0;
#X connect 7 1 8 0;
#X restore 141 -32 pd rt;
#X obj 3 83 outlet;
#X obj 180 -36 t a b;
#X msg 207 -13 0;
#X obj 355 -1 r \$0window-size;
#N canvas 572 342 507 248 Hann-window 0;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-hann 2048 float 0;
#X coords 0 1 2047 0 200 120 1;
#X restore 279 22 graph;
#X msg 165 58 resize \$1;
#X obj 165 82 s \$0-hann;
#X obj 29 -34 r \$0window-size;
#X obj 47 62 samplerate~;
#X obj 47 84 / 512;
#X obj 47 106 osc~;
#X obj 48 145 +~ 0.5;
#X obj 29 167 tabwrite~ \$0-hann;
#X msg 121 62 0;
#X obj 47 125 *~ -0.5;
#X obj 29 7 t b f;
#X obj 73 40 /;
#X obj 88 13 r \$0interp;
#X connect 1 0 2 0;
#X connect 3 0 11 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 10 0;
#X connect 7 0 8 0;
#X connect 9 0 6 1;
#X connect 10 0 7 0;
#X connect 11 0 9 0;
#X connect 11 0 4 0;
#X connect 11 0 8 0;
#X connect 11 1 12 0;
#X connect 11 1 1 0;
#X connect 12 0 5 1;
#X connect 13 0 12 1;
#X restore 355 -87 pd Hann-window;
#X obj 356 -45 table wtri\$0;
#X obj 471 79 s wtri\$0;
#N canvas 566 306 607 201 melscale 0;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0mel 51 float 3;
#A 0 11.959 13.0721 14.2888 15.6188 17.0725 18.6616 20.3985 22.2972
24.3725 26.641 29.1207 31.8312 34.7939 38.0324 41.5723 45.4418 49.6714
54.2946 59.3482 64.8721 70.9102 77.5103 84.7247 92.6106 101.231 110.653
120.952 132.21 144.515 157.967 172.67 188.741 206.309 225.511 246.501
269.444 294.523 321.937 351.902 384.655 420.458 459.593 502.37 549.129
600.241 656.109 717.177 783.93 856.896 936.654 1023.83;
#X coords 0 2048 51 -1 200 140 1;
#X restore 381 29 graph;
#X obj 107 78 s \$0mel;
#X msg 107 57 resize \$1;
#X obj 22 75 for++ 0 40;
#X obj 22 28 t b f f f;
#X obj 22 153 tabwrite \$0mel;
#X obj 22 108 expr (700*(exp((($f1*5015.0/$f2)/1127.01048)-1))*$f3)/22050
\;;
#X obj 177 86 - 1;
#X obj 42 55 - 1;
#X obj 321 -13 r \$0window-size;
#X obj 22 -23 r \$0mel-bands;
#X obj 321 62 t b f;
#X obj 22 2 f;
#X obj 324 27 / 2;
#X connect 2 0 1 0;
#X connect 3 0 5 1;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 4 1 8 0;
#X connect 4 2 7 0;
#X connect 4 3 2 0;
#X connect 6 0 5 0;
#X connect 7 0 6 1;
#X connect 8 0 3 1;
#X connect 9 0 13 0;
#X connect 10 0 12 0;
#X connect 11 0 12 0;
#X connect 11 1 6 2;
#X connect 12 0 4 0;
#X connect 13 0 11 0;
#X restore 355 -68 pd melscale;
#X obj 347 100 import iem_tab;
#X obj 345 121 import iemmatrix;
#X obj 246 -38 s \$0mel-bands;
#X obj 141 -65 route rt table off bands;
#X obj 419 77 s one\$0;
#X msg 385 38 resize \$1 \, const 0;
#X obj 384 19 / 2;
#X connect 1 0 24 0;
#X connect 3 0 2 0;
#X connect 3 1 2 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X connect 6 0 11 0;
#X connect 7 0 9 0;
#X connect 10 0 3 0;
#X connect 10 0 13 0;
#X connect 11 0 10 0;
#X connect 12 0 11 1;
#X connect 12 0 2 0;
#X connect 12 1 2 0;
#X connect 14 0 3 1;
#X connect 14 1 15 0;
#X connect 15 0 11 1;
#X connect 15 0 2 0;
#X connect 16 0 7 0;
#X connect 16 0 27 0;
#X connect 24 0 12 0;
#X connect 24 1 14 0;
#X connect 24 2 4 0;
#X connect 24 3 23 0;
#X connect 26 0 25 0;
#X connect 26 0 19 0;
#X connect 27 0 26 0;
